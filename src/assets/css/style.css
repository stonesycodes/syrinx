/* ===== System 7 Font Stack ===== */
:root {
  --mac-font: Chicago, Geneva, Helvetica, Arial, sans-serif;
  --bg-gray: #c6c6c6;
  --system-gray: #e5e5e5; /* menu bar + title bars */
  --window-gray: #dcdcdc;
  --border-dark: #000;
  --border-light: #fff;
}

body {
  margin: 0;
  font-family: var(--mac-font);
  background: var(--bg-gray);
  color: #000;
}

header {
  background: var(--window-gray);
  border-bottom: 2px solid var(--border-dark);
  padding: 10px;
}

h1, h2, h3 {
  margin: 0 0 0.5em 0;
  font-weight: bold;
}


.logo {
  width: 64px;
}

.catalog {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* ===== Finder-style list ===== */

.catalog {
  list-style: none;
  padding: 0;
  margin: 0;
  border-top: 1px solid #999;
}

.card {
  display: grid;
  grid-template-columns: 420px 90px 160px;
  align-items: center;
  padding: 6px 8px;
  border-bottom: 1px solid #999;
  font-size: 13px;
}

.card:last-child {
  border-bottom: none;
}

.card h3 {
  margin: 0;
  font-size: 14px;
}

.card:nth-child(even) {
  background: #e5e5e5;
}


.checkout-btn {
  font-size: 1rem;
  padding: 0.5rem;
  border: 2px solid black;
  background: white;
  cursor: pointer;
}

.checkout-btn.checked-out {
  background: #999;
  cursor: not-allowed;
}

/* ===== Finder window chrome ===== */
.finder-window{
  height: 100%;
  display: flex;
  flex-direction: column;
  min-height: 0;

  background: var(--system-gray);
  border: 2px solid #000;
  box-shadow: inset 1px 1px 0 #fff, inset -1px -1px 0 #888;
}

.finder-titlebar{
  display: grid;
  grid-template-columns: 20px 1fr20px;
  align-items: center;

  height: 22px;
  padding: 2px 6px;

  background: var(--system-gray);
  border-bottom: 1px solid #000;
}

.finder-title{
  justify-self: center;
  font-size: 12px;
  font-weight: bold;
  white-space: nowrap;
}

/* Button boxes */
.finder-btn{
  box-sizing: border-box;
  display: block;
  width: 12px;
  height: 12px;
  border: 1px solid #000;
  background: var(--system-gray);
  box-shadow: inset 1px 1px 0 #fff, inset -1px -1px 0 #888;
}
/* Make sure they sit left/right, not stretched */
.finder-btn.close{ justify-self: start; }
.finder-btn.zoom { justify-self: end; }


.finder-btn.close::after{
  content: "";
  display: block;
  width: 2px;
  height: 2px;
  margin: 4px auto 0;
  background: #000;
}

.finder-content{
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
}

.machine-content {
  flex-direction: column;
}

.machine-headerbar {
  display: grid;
  grid-template-columns: 15ch 6ch 25ch 1fr;
  background: var(--system-gray);
  border-bottom: 2px solid var(--border-dark);
  font-size: 12px;
}

.machine-header-cell {
  padding: 6px 8px;
  border-right: 1px solid var(--border-dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.machine-header-cell:last-child {
  border-right: none;
}

.machine-meta {
  display: grid;
  grid-template-columns: 15ch 6ch 25ch 1fr;
  border-bottom: 1px solid var(--border-dark);
  font-size: 12px;
  background: #fff;
  --machine-row-height: 20px;
  min-height: calc(var(--machine-row-height) * 10);
  align-items: stretch;
}

.machine-meta-cell {
  padding: 6px 8px;
  border-right: 1px solid var(--border-dark);
  align-self: stretch;
}

.machine-meta-cell:last-child {
  border-right: none;
}

.machine-image-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px;
}

.machine-image {
  max-width: 100%;
  max-height: 140px;
  object-fit: contain;
  image-rendering: -webkit-optimize-contrast;
}

.finder-detail {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  padding: 8px;
  display: flex;
  flex-direction: column;
}

.finder-content .catalog{
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  margin: 0;
  padding: 0;
}
.finder-window .card,
.finder-window .card.header{
  grid-template-columns: minmax(0, 1fr) 60px 95px;
  column-gap: 8px;
}

/* ===== Mac Window ===== */
main {
  max-width: 900px;
  margin: 20px auto;
  background: var(--window-gray);
  border: 2px solid var(--border-dark);
  box-shadow:
    inset 1px 1px 0 var(--border-light),
    inset -1px -1px 0 #888;
  padding: 12px;
}

/* ===== System 7 Button ===== */
button,
a.button {
  font-family: var(--mac-font);
  background: var(--window-gray);
  border: 2px solid var(--border-dark);
  padding: 4px 10px;
  cursor: pointer;
  box-shadow:
    inset 1px 1px 0 var(--border-light),
    inset -1px -1px 0 #888;
}

button:active {
  box-shadow:
    inset -1px -1px 0 var(--border-light),
    inset 1px 1px 0 #888;
}

button:disabled,
button[aria-disabled="true"] {
  cursor: not-allowed;
  color: #666;
  background: #d8d8d8;
  box-shadow: inset 1px 1px 0 #f2f2f2, inset -1px -1px 0 #aaa;
}

.card a {
  text-decoration: none;
  color: #000;
}

.status {
  font-size: 12px;
}

.status.checked-out {
  font-weight: bold;
}

ul {
  padding-left: 16px;
}

a {
  color: #000;
}

a:hover {
  text-decoration: underline;
}

.col {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.col.year {
  text-align: left;
  padding-right: 8px;
}

.col.action {
  text-align: right;
}

/* Column header row */
.card.header{
  background: var(--system-gray);
  font-weight: bold;
  border-bottom: 2px solid #000; /* keep the classic divider */
}

.name-link {
  color: #000;
  text-decoration: none;
}

.name-link:hover {
  text-decoration: underline;
}

.status[data-state="available"] {
  color: #000;
}

.status[data-state="checked-out"] {
  font-weight: bold;
}

.status[data-state="repairing"] {
  font-style: italic;
}

.status[data-state="repairing"]::before {
  content: "âš  ";
}

.mac-hero {
  position: relative;
  max-width: 1200px;
  margin: 0 auto;
}

.mac-frame {
  position: relative;
  z-index: 1;  
  width: 100%;
  height: auto;
  display: block;
}

.mac-screen {
  position: absolute;
  z-index: 2;  

  /* ðŸ”§ TUNE THESE FOUR VALUES */
  top: 10%;
  left: 17%;
  width: 67%;
  height: 40%;

  overflow: hidden;
}

.mac-screen::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;

  /* Edge darkening + slight center glow */
  background:
    radial-gradient(ellipse at center,
      rgba(255,255,255,0.06) 0%,
      rgba(0,0,0,0.00) 45%,
      rgba(0,0,0,0.20) 75%,
      rgba(0,0,0,0.35) 100%);
  mix-blend-mode: multiply;
}

.mac-screen::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;

  background: linear-gradient(
    135deg,
    rgba(255,255,255,0.10) 0%,
    rgba(255,255,255,0.00) 30%,
    rgba(0,0,0,0.00) 100%
  );
  opacity: 0.35;
}

.screen-window {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: #e5e5e5;
  border: 2px solid #000;
  box-shadow:
    inset 1px 1px 0 #fff,
    inset -1px -1px 0 #888;
  padding: 6px;
  font-size: 12px;
}

.screen-title {
  margin: 0 0 6px 0;
  font-size: 13px;
  font-weight: bold;
}

.mac-screen .card {
  padding: 4px 6px;
  font-size: 12px;
}

.mac-screen .card.header {
  background: var(--system-gray) !important;
  border-bottom: 2px solid #000;
}


/* Make the catalog fit inside the Macintosh screen */
.mac-screen .card {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 60px 95px; /* Name | Year | Status */
  column-gap: 8px;
}

/* Scrollable catalog inside CRT */
.mac-screen .catalog {
  flex: 1;                 /* fills remaining screen space */
  overflow-y: auto;        /* scrolling happens here */
  margin: 0;
  padding: 0;
}

.mac-screen .catalog::-webkit-scrollbar {
  width: 8px;
}

.mac-screen .catalog::-webkit-scrollbar-thumb {
  background: #888;
  border: 2px solid #e5e5e5;
}

.mac-screen .card.header {
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--system-gray) !important;
}

/* Keep header aligned the same way */
.mac-screen .card.header {
  grid-template-columns: minmax(0, 1fr) 60px 95px;
}

/* Ensure cells can shrink and ellipsis works */
.mac-screen .col {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mac-screen .col.year {
  text-align: right;
}

.detail {
  font-size: 12px;
  line-height: 1.3;
  display: flex;
  flex-direction: column;
  min-height: 100%;
}

.detail-actions {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
  margin-top: auto;
  padding-top: 12px;
  padding-bottom: 6px;
}

.detail-actions > * {
  width: 100%;
}

.detail-actions a.button {
  width: auto;
  justify-self: center;
}

.mac-screen button {
  font-size: 12px;
  padding: 3px 8px;
}
/* ===== System 7 Menu Bar (inside CRT) ===== */
.mac-menubar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 22px;
  padding: 0 6px;

  background: var(--system-gray);
  border-bottom: 1px solid #000;

  font-size: 13px;
  font-weight: bold;
  user-select: none;

  position: sticky;
  top: 0;
  z-index: 5;
}

.menu-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.menu-right {
  display: flex;
  align-items: center;
}

.mac-clock {
  font-weight: normal;
}

.menu-wrap {
  position: relative;
}

.menu-label {
  cursor: default;
}

.menu-btn {
  font-family: inherit;
  font-size: 14px;
  font-weight: bold;
  background: transparent;
  border: none;
  padding: 0;
  cursor: default;
}

/* Dropdown */
.menu-dropdown {
  display: none;
  position: absolute;
  top: 20px;
  left: 0;

  min-width: 170px;
  padding: 4px 0;
  margin: 0;

  list-style: none;
  background: #e5e5e5;

  border: 2px solid #000;
  box-shadow: inset 1px 1px 0 #fff, inset -1px -1px 0 #888;

  z-index: 10;
}

.apple-menu .menu-dropdown { min-width: 220px; }

/* Open on hover (mock behavior) */
.menu-wrap.open .menu-dropdown {
  display: block;
}

/* Menu items */
.menu-item {
  display: block;
  width: 100%;
  text-align: left;

  padding: 3px 10px;
  font: inherit;
  background: transparent;
  border: none;
  cursor: default;
  color: #000;
  white-space: nowrap;
}

.menu-item.disabled {
  opacity: 0.55;
}

.menu-item:not(.disabled):hover {
  background: #000;
  color: #fff;
}

.menu-sep {
  height: 1px;
  background: #000;
  margin: 4px 6px;
}

/* Screen content wrapper so catalog can scroll under the menubar */
.screen-window {
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.screen-body {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* If your catalog should scroll in the CRT */
.mac-screen .catalog {
  flex: 1;
  overflow-y: auto;
  margin: 0;
  padding: 0;
}

/* ===== About dialog ===== */
.dialog-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.15);
  z-index: 20;
}

.mac-dialog {
  position: absolute;
  left: 12%;
  top: 18%;
  width: 76%;

  background: #e5e5e5;
  border: 2px solid #000;
  box-shadow: inset 1px 1px 0 #fff, inset -1px -1px 0 #888;

  z-index: 21;
}

.mac-dialog-title {
  padding: 4px 6px;
  border-bottom: 1px solid #000;
  font-weight: bold;
}

.mac-dialog-body {
  padding: 10px;
  font-size: 12px;
  line-height: 1.35;
}

.mac-dialog-actions {
  padding: 0 10px 10px;
  display: flex;
  justify-content: center;
}

.mac-btn {
  font-family: inherit;
  background: #e5e5e5;
  border: 2px solid #000;
  padding: 3px 14px;
  box-shadow: inset 1px 1px 0 #fff, inset -1px -1px 0 #888;
}

.mac-btn:active {
  box-shadow: inset -1px -1px 0 #fff, inset 1px 1px 0 #888;
}
.about-link {
  color: inherit;
  text-decoration: underline;
  text-decoration-thickness: 1px;
}
.about-link:active {
  opacity: 0.75;
}
body,
main {
  padding-bottom: 0;
  margin-bottom: 0;
}
/* === OVERRIDES: unify chrome + unsquash Finder buttons === */

.mac-menubar {
  background: var(--system-gray);
}

.finder-window {
  background: var(--system-gray);
}

/* Finder title bar should match menu bar */
.finder-titlebar {
  background: var(--system-gray);
  border-bottom: 1px solid var(--border-dark);

  /* prevent squashed controls */
  height: 22px;
  padding: 2px 6px;

  display: grid;
  grid-template-columns: 20px 1fr 20px;
  align-items: center;
}

/* close/zoom boxes: force true squares */
.finder-btn {
  box-sizing: border-box;
  display: block;
  width: 12px;
  height: 12px;
  background: var(--system-gray);
  border: 1px solid var(--border-dark);
  box-shadow: inset 1px 1px 0 var(--border-light), inset -1px -1px 0 #888;
}

.finder-btn.close { justify-self: start; }
.finder-btn.zoom  { justify-self: end; }

/* Column header row should NOT be darker than the chrome */
.card.header {
  background: var(--system-gray);
  border-bottom: 2px solid var(--border-dark);
}
/* === FINAL LAYERING: make CRT glass never darken UI chrome === */
.mac-screen { isolation: isolate; }

/* CRT overlays live "behind" the UI */
.mac-screen::before { z-index: 1 !important; }
.mac-screen::after  { z-index: 2 !important; }

/* Everything inside the screen is above the overlays */
.mac-screen .screen-window {
  position: relative;
  z-index: 3 !important;
}

/* Ensure Finder chrome isn't treated as below-glass */
.finder-window,
.finder-titlebar,
.card.header {
  position: relative;
  z-index: 4 !important;
}

/* Apply CRT glass only to the content area (not chrome) */
.mac-screen::before,
.mac-screen::after {
  content: none !important;
}
.finder-content {
  position: relative;
}

.finder-content::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;

  background:
    radial-gradient(ellipse at center,
      rgba(255,255,255,0.06) 0%,
      rgba(0,0,0,0.00) 45%,
      rgba(0,0,0,0.20) 75%,
      rgba(0,0,0,0.35) 100%);
  mix-blend-mode: multiply;
}
.machine-content::after {
  content: none;
}
.machine-content .finder-detail {
  position: relative;
}
.machine-content .finder-detail::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(ellipse at center,
      rgba(255,255,255,0.06) 0%,
      rgba(0,0,0,0.00) 45%,
      rgba(0,0,0,0.20) 75%,
      rgba(0,0,0,0.35) 100%);
  mix-blend-mode: multiply;
}

/* === Finder grab bars (3 thick lines) === */
.finder-titlewrap {
  display: flex;
  align-items: center;
  gap: 8px;
  justify-content: center;
  min-width: 0;
}

.finder-grab {
  flex: 1;
  height: 12px;
  min-width: 18px;
  background:
    linear-gradient(var(--border-dark), var(--border-dark)) 0 2px / 100% 2px no-repeat,
    linear-gradient(var(--border-dark), var(--border-dark)) 0 6px / 100% 2px no-repeat,
    linear-gradient(var(--border-dark), var(--border-dark)) 0 10px / 100% 2px no-repeat;
}

/* ===== Machine detail mini grid (Finder-like) ===== */
.mini-grid {
  width: 100%;
  box-sizing: border-box;
  border-top: 1px solid #999;
  border-bottom: 1px solid #999;

  /* Use padding instead of margin so it fills the window width */
  margin: 0;
  padding: 8px;
}

.mini-row {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  align-items: center;
  border-bottom: 1px solid #999;
  font-size: 12px;
}

.mini-row:last-child {
  border-bottom: none;
}

.mini-row.header strong {
  background: var(--system-gray);
  border-bottom: 2px solid #000;
  font-weight: bold;
  text-align: left;
}

.mini-row .cell,
.mini-row strong {
  padding: 6px 8px;
}


/* Keep toggle buttons same width even when label changes */
.status-toggle {
  width: 150px;          /* adjust to taste */
  text-align: center;
  white-space: nowrap;
}
.status-toggle.is-on {
  font-weight: bold;
}
